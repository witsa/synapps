{% raw %}
```text
SYNAPPS-STUDIO-COMPOSITE|{"config":{"key":"pump","name":"Pompe","properties":{"width":"100px"},"additionalDefs":{"resourcePath":{"type":"wos-path","label":"Pompe","helperTxt":"Chemin de la pompe depuis <code>:easy.RESS</code>","value":"","relativeToPath":":easy.RESS","variableType":"resourcesOnly"},"delay":{"type":"number","label":"Délai","helperTxt":"Délai de raffraichissement","value":10,"min":0,"unit":"s"},"autoRefresh":{"type":"boolean","label":"Raf. Auto?","helperTxt":"Raffraichissement automatique ?","value":true},"flowUp":{"type":"boolean","label":"Flux Haut?","value":true}}},"leadActor":{"type":"layout/stack","key":"root","children":[{"type":"layout/stack","key":"sources","children":[{"type":"redy/data-source/wos-variable","key":"resources","properties":{"mode":"relative","path":":easy.RESS"},"bindings":{"properties.autoRefreshDelay":"stage@properties.delay","properties.autoRefresh":"stage@properties.autoRefresh"}},{"type":"redy/data-source/wos-relative-variable","key":"pumpVar","properties":{"dataReadMode":"always","relativeTo":"resources"},"bindings":{"properties.relativePath":"stage@properties.resourcePath","properties.relativeTo":""},"events":{"onDidDataStore":["const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error || !context.data || context.data.classID !== 665) {","  setVisible('layers', false);","  return;","}","","setVisible('layers', true);",""],"properties/relativeTo/binding/onReadTransform":["console.log(context.value);","return context.value ? '' : 'resources';",""]}},{"type":"redy/data-source/wos-relative-variable","key":"runVar","properties":{"relativePath":"Run1:value","relativeTo":"pumpVar","dataReadMode":"always"},"events":{"onDidDataStore":["let isRuning = null;","const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error) {","  console.error(error);","} else {","  isRuning = context.data;","}","","setVisible('layers', !context.utils.isNone(isRuning));","","if(isRuning) {","  setVisible('flow', true);","  setVisible('on', true);","  setVisible('off', false);","  setVisible('run', true);","} else {","  setVisible('flow', false);","  setVisible('on', false);","  setVisible('off', true);","  setVisible('run', false);","}",""]}},{"type":"redy/data-source/wos-relative-variable","key":"faultVar","properties":{"relativePath":"Fault1:value","relativeTo":"pumpVar","dataReadMode":"always"},"events":{"onDidDataStore":["let isFault = null;","const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error) {","  console.error(error);","} else {","  isFault = context.data;","}","","setVisible('fault', isFault);","setVisible('off', !isFault);",""]}}]},{"type":"display/text","key":"tooltip","properties":{"content":"{{ressName}}\n{{state}}","visible":false},"additionalDefs":{"ressName":{"type":"text","label":"Nom du bruleur"},"state":{"type":"text","label":"Etat du bruleur"}},"bindings":{"additionals.ressName":{"relativeTo":"pumpVar","relativePath":":name","source":"redy/wos-relative-variable"},"additionals.state":{"relativeTo":"pumpVar","relativePath":":state","dataReadMode":"always","source":"redy/wos-relative-variable"}}},{"type":"layout/view-box","key":"view-box","children":[{"type":"layout/canvas","key":"layers","properties":{"overflowX":"visible","overflowY":"visible","height":"100px","width":"100px"},"children":[{"type":"display/image","key":"pump","properties":{"content":"data:image/gif;base64,R0lGODlhZABkAMQAAP///wAAADo6Op0eHv8AAG1tbf9GRv8yMv9aWv+Cgv9ubv/S0v+Wlv+qqv++vsrKyv/m5v8dHbLG3Obt8v/w8I2lxsbS4pGuzv+ZAKG60tPe6uDm7vr6/wAAAAAAAAAAACH5BAUUAAAALBcAAAA2AGQAAAX/IAAEgSCQYqquImmibNyWZ6CSuC2afN/nLp9QkALqjMikcsnMDZ/QqHToqlgv2ExGwpVYvhrNZjMpTzhojnkyDn8tXYkWe7FWagI7XRt/h8draWpmbRpvcXNYdnh6WVtdfmJkZoJrhYddiXVWeFOen1NNoqOkRzQwI6Mvo0WnpqWwsSQDtLW2t7i5uru5swQREQcHBgYICAoKCQkMDA0NDg4LCxAQFNYU1NLQzszKyMbEwsAEA77AwsTGyMrMztDS1NfYENoO3AzeCuAG4hHk5sGGFTuWbFmzZ9GmVbuWbcG2Bt0SfEMQ7sC4cgF4adzIEZesj6Vm5Ciy0UjJViNb/60iGaxYsmbRIAQhQc8ePn38IpRTWUPGiowtjy17plBeNpsSKVrc6bMpSFJNZWQk8GuYUJjwFjZEitMiVaZRfw6gGvQl0aLztEFMmvOrjrA3xlZ1OdQBqChwSZK1atbuXSh5R8gtW/cvXrhT5159tmQKBgw9EA/mmwBHFMtDHj+OHDVxS8wCCogeTZoHaAGaNfMIi4TH6CWjTfNIvdlE3owuXs/ahSN2kNScWdMQvVsu1ePHa5EQ/cJE7dWIQxfYjby6dXIYmdMQEp04LarCwosfL+xrOe1DWEtPTAAdsffw4Zd3iz64zxLej7uPz//9/H/1dTedcfsZY+CBBvp3QP9yAaDXHXsFIijhPvwsSN8JRHQWWmJPIOPhhx4mWCGDBZygYX4ESFdaQcq02GKIFI0IYIlvxYBfYgeE9sCOD5To4o8uTlTRhTWycONYwujIY4nMNOlkk/nsU955Jkq1IZLDKLkjk8506SVE+EiE05BUFlnEle0Ro2WPArgDzZsPRaRPjPwAWKWRaAq0ZokISeOnQ/aAKaaUdpo5ApppGrCnAO8s0EM93HhDaKF4DgiemgXwyGZCKpYIaZhzhkNkpThiqqmnjpLGnFqgTlomqXLpmemSAqSq6qpIJRWjha/+hKisp9baaWkOraWrqJT6ammii9p6a625hlpnsjf8air/rc6qCq2x0vLa4J1nLgssttmuWmyru46qbKmKzrolo9J0Wiug3Lr6rZlHXtpusI0+Sm+96VJbraXjvtvnn/92I2SdvcLKrLtsuglnnOj6J/DAU6Gz6EFfdinnmCM27HCSEDP55MlR7rqgyA63tyiQMC88H8vKLjtsiSzGLLO32p3I4RAgBj2nyiSCex+i7Qk00IQIKkjidLetR6DSTB/oNH00Bobfskn357WMMxqtHopdfy2fhWEbOvaAsZLn9sznZR1YzdRdZzcty8k99w3DTZfRd3Zjl12JPe0dV27EFddL3jTiZrhITpigWxKxrQKE4Z7hHcTNpVlOiz//YD6Z/wHKbU5FcW2FvrdnlJWeRC1seaX63KzTBRMvXCkFOlhaj75YQvGkdW7su6vtlO99ZWXNVmt1Vbzoe9l+VvDM36S7W9Arljxa1ROP/epPifK4YIRhFfzyNTWvO+/3ucISZebPFED61ucElvx8pySYRibxjxIOkAufAHPQkQIacHFjOYdA1FGQdhzsfMKjWMoqchGAuIeB7DhIoyC4lUB9TEoW8QdGEhiQdBAkg25SHkPokTBQdSuE//jbAWdYwAHaMCX4C2BjaiC+GawkFTe0oWGGCIoqXMERfQCDJAKRBktswA1fQEQG6LAII1ZgD4/gQiQAQYkmEuKJhohiJqaoCDBOWBGLSbTAHyZRhkp8EYpwGCMVzbgdItrxCUG8oQ5T4AkjeOJ/qEjFD2/jPq0VMgQAOw=="}},{"type":"display/image","key":"flow","properties":{"content":"data:image/gif;base64,R0lGODlhZABkAIABAJkAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgABACwqABUAEAA7AAACYYwfAMio2th78UxYL40ay+5Z4OKMoemhmwqx7lXFTRhPcgLXOddl/TwCgj6mUtHgQrJwr9ftSfNFiRtpVbij2rAabpYZFB3Bx2Sz+bxNseqvlsTrxt1k91h5V4lReP75VQAAIfkECQoAAQAsKgASABAAQAAAAnCMD5F5baucA7RS+WzFWstuTWCIjFtmnmm4tiYGw1dcznFH4zK46+L4eTVaw1XNqHAlXcwT7WnLOXvTIInDw/qKwF/22EUJl0gmual8QhnrqLbqdXM97+t8K8YTwV/z+YWGprY2aFfHdngTAaEIgVgAACH5BAkKAAEALCoAEgAQAEAAAAJyjBGoac0LXQK0WnSupnnf6YViJZWmxJ2OpXakqsHb6Zliea+jnoO7fxsJQ61ixugrxmQs2sz2RBGlNd7UVQVOhwquN4V0IpvMl5OMi1I/6Wyjh1UL38N47fsNy8bmc7/9Z4UmGKg1aPg3t/LAiHHQCFkAADs="},"bindings":{"properties.rotate":"stage@properties.flowUp"},"events":{"properties/rotate/binding/onReadTransform":["return context.value ? 0 : 180;"]}},{"type":"display/image","key":"run","properties":{"content":"data:image/gif;base64,R0lGODlhHgAeAIAAAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBQAAACwAAAAAHgAeAAACQYSPGcntF9abKlpKrZaYbRN1zYVwIhSeE6k6bDuacDU/aY3n+s73/o+58YQ6Yu51NNaQJxlTlPrMNs+mtCjbZR8FACH5BAkFAAAALAAAAAAeAB4AAAJAhI+py+2vgpzQzUtNqAAjv0EZc4mSGTYjWVopB8fyTNf2jef6zvf+7zu5VgtiRDhEvY5LUqelgT5SGI+tCsw2CgAh+QQJBQAAACwAAAAAHgAeAAACQISPqcvtD6M8IcxY64V5v+41YLiMZKKdpaWiLPV6YxZvKZ3KcW7jBt/LmXquVtGIALaGS6WK+XSeaEhY9Yq9FgAAIfkECQUAAAAh/wsAAAAAAAAAAAAAAAhBbGNoZW15AAEgASABIAEgACwAAAAAHgAeAAACSoSPqcvtD6OctNoQHN6Rayx5y5aF4JiVJmqoa3JeLiBWdWzRLi4jvL2bAX0/06zYESIbpeJypGPUHiTmkyiEXVtVa+4LDovH5EoBADs=","top":"36px","left":"35px"}},{"type":"display/image","key":"on","properties":{"content":"data:image/gif;base64,R0lGODlhDgAOALMCAACZM///zAAAADG0ZCOtWHPQmVLCfwygQ8Pt1ZLcsRWlS0S9dGPKjYbXp6Thvv///yH5BAEHAAEALAAAAAAOAA4AAARaMMggqp1YgM0FpkCSNIUxAJ6kJQjiNMxCoGDhIA+SxMSBarYWAibzVQCMRsKRKA16P4CBUagaFgPF5jhYGL5YhS9KIAzOBHEHdFC4x9uJhkNPyenxD8VSwUQAADs=","top":"44px","left":"43px"}},{"type":"display/image","key":"off","properties":{"content":"data:image/gif;base64,R0lGODlhDgAOALMCAABVAP//zAAAAABzHgCFMABqFQCWQQCPOgCgSwB9KACJNAB4IwBjDgBaBQBhDAClUCH5BAEHAAEALAAAAAAOAA4AAARWMMggqp1YgM0FpsAhKskAeJJmIOxBLMUJHsbzIAaRFM6pKavWi+cDEGgGg2LYqwASBIX0NWA0ioNFYrsYEIuFgVj8lWkYaPR1gwI13hxZJs7+pCwVTAQAOw==","top":"44px","left":"43px"}},{"type":"display/image","key":"fault","properties":{"content":"data:image/gif;base64,R0lGODlhHgAeAJEAAP//////AP8AAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAAACwAAAAAHgAeAAACZZyBqctpJsRotI0Icd3gai9xVhQi4CQ6JKpq6Tm6G0zR9crZi17xHZ76yYSlIBHle62SQRDQyHCyoDtSkdqyTqknZg7ovQ3D1aHpOUMryGEv+Ri7ps3v9bNeDuGjSzMX84AVZVAAACH5BAUKAAAALAEAAQAcABwAAAJPTICpy2nfYoNQ2gqwXTqbzX1MJ5GOeKGReR4gy04qEq9qXYp4+rhgPvuNdpteUOhxEYe+JJIWXDplTSCveAxVFUuTdNp6Qn1f7qeszT4NBQA7","top":"37px","left":"35px"}}],"bindings":{"properties.toolTip":"actor#tooltip@completedContent"},"events":{"onInit":["if (!this.stage.isInDesigner) {","  this.properties.visible = false;","}"]}}]}],"additionalDefs":{"ressInDesigner":{"type":"wos-path","relativeToPath":":easy.RESS","variableType":"resourcesOnly"}},"additionals":{"ressInDesigner":"R00034"},"bindings":{"properties.width":"stage@properties.width"},"events":{"properties/width/onValueChanged":["const W = 100;","const toPx = x => `${x}px`;","const getActor = key => this.stage.getActor(key);","const wPx = context.newValue;","if (!wPx || !wPx.includes('px')) {","  this.stage.properties.width = toPx(W);","  return;","}","","const w = parseFloat(wPx);","const r = w / W;","","getActor('view-box').properties.width = toPx(W * r);","getActor('view-box').properties.height = toPx(100 * r);",""],"additionals/ressInDesigner/onValueChanged":["if (this.stage.isInDesigner) {","  this.stage.properties.resourcePath = this.additionals.ressInDesigner;","}"],"onInit":["if (this.stage.isInDesigner) {","  this.stage.properties.resourcePath = this.additionals.ressInDesigner;","}"]}}}
```
{% endraw %}
