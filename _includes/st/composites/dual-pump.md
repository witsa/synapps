{% raw %}
```text
SYNAPPS-STUDIO-COMPOSITE|{"config":{"key":"dualPump","name":"Pompe Double","properties":{"width":"100px"},"additionalDefs":{"resourcePath":{"type":"wos-path","label":"Pompe","helperTxt":"Chemin de la pompe depuis <code>:easy.RESS</code>","value":"","relativeToPath":":easy.RESS","variableType":"resourcesOnly"},"delay":{"type":"number","label":"Délai","helperTxt":"Délai de raffraichissement","value":10,"min":0,"unit":"s"},"autoRefresh":{"type":"boolean","label":"Raf. Auto?","helperTxt":"Raffraichissement automatique ?","value":true},"flowUp":{"type":"boolean","label":"Flux Haut?","value":true}}},"leadActor":{"type":"layout/stack","key":"root","children":[{"type":"layout/stack","key":"sources","children":[{"type":"redy/data-source/wos-variable","key":"resources","properties":{"mode":"relative","path":":easy.RESS"},"bindings":{"properties.autoRefreshDelay":"stage@properties.delay","properties.autoRefresh":"stage@properties.autoRefresh"}},{"type":"redy/data-source/wos-relative-variable","key":"pumpVar","properties":{"dataReadMode":"always","relativeTo":"resources"},"bindings":{"properties.relativePath":"stage@properties.resourcePath","properties.relativeTo":""},"events":{"onDidDataStore":["const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error || !context.data || context.data.classID !== 666) {","  setVisible('layers', false);","  return;","}","","setVisible('layers', true);",""],"properties/relativeTo/binding/onReadTransform":["console.log(context.value);","return context.value ? '' : 'resources';",""]}},{"type":"redy/data-source/wos-relative-variable","key":"run1Var","properties":{"relativePath":"Run1:value","relativeTo":"pumpVar","dataReadMode":"always"},"events":{"onDidDataStore":["let isRuning = null;","const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error) {","  console.error(error);","} else {","  isRuning = context.data;","}","","setVisible('layers', !context.utils.isNone(isRuning));","","if(isRuning) {","  // setVisible('flow', true);","  setVisible('on1', true);","  setVisible('off1', false);","  setVisible('run1', true);","} else {","  // setVisible('flow', false);","  setVisible('on1', false);","  setVisible('off1', true);","  setVisible('run1', false);","}",""]}},{"type":"redy/data-source/wos-relative-variable","key":"run2Var","properties":{"relativePath":"Run2:value","relativeTo":"pumpVar","dataReadMode":"always"},"events":{"onDidDataStore":["let isRuning = null;","const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error) {","  console.error(error);","} else {","  isRuning = context.data;","}","","setVisible('layers', !context.utils.isNone(isRuning));","","if(isRuning) {","  // setVisible('flow', true);","  setVisible('on2', true);","  setVisible('off2', false);","  setVisible('run2', true);","} else {","  // setVisible('flow', false);","  setVisible('on2', false);","  setVisible('off2', true);","  setVisible('run2', false);","}",""]}},{"type":"redy/data-source/wos-relative-variable","key":"fault1Var","properties":{"relativePath":"Fault1:value","relativeTo":"pumpVar","dataReadMode":"always"},"events":{"onDidDataStore":["let isFault = null;","const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error) {","  console.error(error);","} else {","  isFault = context.data;","}","","setVisible('fault1', isFault);","setVisible('off1', !isFault);",""]}},{"type":"redy/data-source/wos-relative-variable","key":"fault2Var","properties":{"relativePath":"Fault2:value","relativeTo":"pumpVar","dataReadMode":"always"},"events":{"onDidDataStore":["let isFault = null;","const setVisible = (key, value) => context.getActor(key).properties.visible = value;","if (context.error) {","  console.error(error);","} else {","  isFault = context.data;","}","","setVisible('fault2', isFault);","setVisible('off2', !isFault);",""]}}]},{"type":"display/text","key":"tooltip","properties":{"content":"{{ressName}}\n{{state}}","visible":false},"additionalDefs":{"ressName":{"type":"text","label":"Nom du bruleur"},"state":{"type":"text","label":"Etat du bruleur"}},"bindings":{"additionals.ressName":{"relativeTo":"pumpVar","relativePath":":name","source":"redy/wos-relative-variable"},"additionals.state":{"relativeTo":"pumpVar","relativePath":":state","dataReadMode":"always","source":"redy/wos-relative-variable"}}},{"type":"layout/view-box","key":"view-box","children":[{"type":"layout/canvas","key":"layers","properties":{"overflowX":"visible","overflowY":"visible","height":"100px","width":"100px"},"children":[{"type":"display/image","key":"pump","properties":{"content":"data:image/gif;base64,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"}},{"type":"display/image","key":"flow","properties":{"content":"data:image/gif;base64,R0lGODlhZABkAIABAJkAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgABACwqABUAEAA7AAACYYwfAMio2th78UxYL40ay+5Z4OKMoemhmwqx7lXFTRhPcgLXOddl/TwCgj6mUtHgQrJwr9ftSfNFiRtpVbij2rAabpYZFB3Bx2Sz+bxNseqvlsTrxt1k91h5V4lReP75VQAAIfkECQoAAQAsKgASABAAQAAAAnCMD5F5baucA7RS+WzFWstuTWCIjFtmnmm4tiYGw1dcznFH4zK46+L4eTVaw1XNqHAlXcwT7WnLOXvTIInDw/qKwF/22EUJl0gmual8QhnrqLbqdXM97+t8K8YTwV/z+YWGprY2aFfHdngTAaEIgVgAACH5BAkKAAEALCoAEgAQAEAAAAJyjBGoac0LXQK0WnSupnnf6YViJZWmxJ2OpXakqsHb6Zliea+jnoO7fxsJQ61ixugrxmQs2sz2RBGlNd7UVQVOhwquN4V0IpvMl5OMi1I/6Wyjh1UL38N47fsNy8bmc7/9Z4UmGKg1aPg3t/LAiHHQCFkAADs="},"additionalDefs":{"run1":{"type":"boolean"},"run2":{"type":"boolean"}},"bindings":{"properties.rotate":"stage@properties.flowUp","additionals.run1":"actor#run1Var@data","additionals.run2":"actor#run2Var@data"},"events":{"properties/rotate/binding/onReadTransform":["return context.value ? 0 : 180;"],"onPropertyChanged":["if (['additionals.run1', 'additionals.run2'].includes(context.propertyPath)) {","  this.properties.visible = this.additionals.run1 || this.additionals.run2;","}"]}},{"type":"display/image","key":"run1","properties":{"content":"data:image/gif;base64,R0lGODlhHgAeAIAAAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBQAAACwAAAAAHgAeAAACQYSPGcntF9abKlpKrZaYbRN1zYVwIhSeE6k6bDuacDU/aY3n+s73/o+58YQ6Yu51NNaQJxlTlPrMNs+mtCjbZR8FACH5BAkFAAAALAAAAAAeAB4AAAJAhI+py+2vgpzQzUtNqAAjv0EZc4mSGTYjWVopB8fyTNf2jef6zvf+7zu5VgtiRDhEvY5LUqelgT5SGI+tCsw2CgAh+QQJBQAAACwAAAAAHgAeAAACQISPqcvtD6M8IcxY64V5v+41YLiMZKKdpaWiLPV6YxZvKZ3KcW7jBt/LmXquVtGIALaGS6WK+XSeaEhY9Yq9FgAAIfkECQUAAAAh/wsAAAAAAAAAAAAAAAhBbGNoZW15AAEgASABIAEgACwAAAAAHgAeAAACSoSPqcvtD6OctNoQHN6Rayx5y5aF4JiVJmqoa3JeLiBWdWzRLi4jvL2bAX0/06zYESIbpeJypGPUHiTmkyiEXVtVa+4LDovH5EoBADs=","top":"35px","left":"10px"}},{"type":"display/image","key":"run2","properties":{"content":"data:image/gif;base64,R0lGODlhHgAeAIAAAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBQAAACwAAAAAHgAeAAACQYSPGcntF9abKlpKrZaYbRN1zYVwIhSeE6k6bDuacDU/aY3n+s73/o+58YQ6Yu51NNaQJxlTlPrMNs+mtCjbZR8FACH5BAkFAAAALAAAAAAeAB4AAAJAhI+py+2vgpzQzUtNqAAjv0EZc4mSGTYjWVopB8fyTNf2jef6zvf+7zu5VgtiRDhEvY5LUqelgT5SGI+tCsw2CgAh+QQJBQAAACwAAAAAHgAeAAACQISPqcvtD6M8IcxY64V5v+41YLiMZKKdpaWiLPV6YxZvKZ3KcW7jBt/LmXquVtGIALaGS6WK+XSeaEhY9Yq9FgAAIfkECQUAAAAh/wsAAAAAAAAAAAAAAAhBbGNoZW15AAEgASABIAEgACwAAAAAHgAeAAACSoSPqcvtD6OctNoQHN6Rayx5y5aF4JiVJmqoa3JeLiBWdWzRLi4jvL2bAX0/06zYESIbpeJypGPUHiTmkyiEXVtVa+4LDovH5EoBADs=","top":"35px","left":"60px"}},{"type":"display/image","key":"on1","properties":{"content":"data:image/gif;base64,R0lGODlhDgAOALMCAACZM///zAAAADG0ZCOtWHPQmVLCfwygQ8Pt1ZLcsRWlS0S9dGPKjYbXp6Thvv///yH5BAEHAAEALAAAAAAOAA4AAARaMMggqp1YgM0FpkCSNIUxAJ6kJQjiNMxCoGDhIA+SxMSBarYWAibzVQCMRsKRKA16P4CBUagaFgPF5jhYGL5YhS9KIAzOBHEHdFC4x9uJhkNPyenxD8VSwUQAADs=","top":"43px","left":"18px"}},{"type":"display/image","key":"on2","properties":{"content":"data:image/gif;base64,R0lGODlhDgAOALMCAACZM///zAAAADG0ZCOtWHPQmVLCfwygQ8Pt1ZLcsRWlS0S9dGPKjYbXp6Thvv///yH5BAEHAAEALAAAAAAOAA4AAARaMMggqp1YgM0FpkCSNIUxAJ6kJQjiNMxCoGDhIA+SxMSBarYWAibzVQCMRsKRKA16P4CBUagaFgPF5jhYGL5YhS9KIAzOBHEHdFC4x9uJhkNPyenxD8VSwUQAADs=","top":"43px","left":"68px"}},{"type":"display/image","key":"off1","properties":{"content":"data:image/gif;base64,R0lGODlhDgAOALMCAABVAP//zAAAAABzHgCFMABqFQCWQQCPOgCgSwB9KACJNAB4IwBjDgBaBQBhDAClUCH5BAEHAAEALAAAAAAOAA4AAARWMMggqp1YgM0FpsAhKskAeJJmIOxBLMUJHsbzIAaRFM6pKavWi+cDEGgGg2LYqwASBIX0NWA0ioNFYrsYEIuFgVj8lWkYaPR1gwI13hxZJs7+pCwVTAQAOw==","top":"43px","left":"18px"}},{"type":"display/image","key":"off2","properties":{"content":"data:image/gif;base64,R0lGODlhDgAOALMCAABVAP//zAAAAABzHgCFMABqFQCWQQCPOgCgSwB9KACJNAB4IwBjDgBaBQBhDAClUCH5BAEHAAEALAAAAAAOAA4AAARWMMggqp1YgM0FpsAhKskAeJJmIOxBLMUJHsbzIAaRFM6pKavWi+cDEGgGg2LYqwASBIX0NWA0ioNFYrsYEIuFgVj8lWkYaPR1gwI13hxZJs7+pCwVTAQAOw==","top":"43px","left":"68px"}},{"type":"display/image","key":"fault1","properties":{"content":"data:image/gif;base64,R0lGODlhHgAeAJEAAP//////AP8AAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAAACwAAAAAHgAeAAACZZyBqctpJsRotI0Icd3gai9xVhQi4CQ6JKpq6Tm6G0zR9crZi17xHZ76yYSlIBHle62SQRDQyHCyoDtSkdqyTqknZg7ovQ3D1aHpOUMryGEv+Ri7ps3v9bNeDuGjSzMX84AVZVAAACH5BAUKAAAALAEAAQAcABwAAAJPTICpy2nfYoNQ2gqwXTqbzX1MJ5GOeKGReR4gy04qEq9qXYp4+rhgPvuNdpteUOhxEYe+JJIWXDplTSCveAxVFUuTdNp6Qn1f7qeszT4NBQA7","top":"35px","left":"10px"}},{"type":"display/image","key":"fault2","properties":{"content":"data:image/gif;base64,R0lGODlhHgAeAJEAAP//////AP8AAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAAACwAAAAAHgAeAAACZZyBqctpJsRotI0Icd3gai9xVhQi4CQ6JKpq6Tm6G0zR9crZi17xHZ76yYSlIBHle62SQRDQyHCyoDtSkdqyTqknZg7ovQ3D1aHpOUMryGEv+Ri7ps3v9bNeDuGjSzMX84AVZVAAACH5BAUKAAAALAEAAQAcABwAAAJPTICpy2nfYoNQ2gqwXTqbzX1MJ5GOeKGReR4gy04qEq9qXYp4+rhgPvuNdpteUOhxEYe+JJIWXDplTSCveAxVFUuTdNp6Qn1f7qeszT4NBQA7","top":"35px","left":"60px"}}],"bindings":{"properties.toolTip":"actor#tooltip@completedContent"},"events":{"onInit":["if (!this.stage.isInDesigner) {","  this.properties.visible = false;","}"]}}]}],"additionalDefs":{"ressInDesigner":{"type":"wos-path","relativeToPath":":easy.RESS","variableType":"resourcesOnly"}},"additionals":{"ressInDesigner":"RChauff1.PPE"},"bindings":{"properties.width":"stage@properties.width"},"events":{"properties/width/onValueChanged":["const W = 100;","const toPx = x => `${x}px`;","const getActor = key => this.stage.getActor(key);","const wPx = context.newValue;","if (!wPx || !wPx.includes('px')) {","  this.stage.properties.width = toPx(W);","  return;","}","","const w = parseFloat(wPx);","const r = w / W;","","getActor('view-box').properties.width = toPx(W * r);","getActor('view-box').properties.height = toPx(100 * r);",""],"additionals/ressInDesigner/onValueChanged":["if (this.stage.isInDesigner) {","  this.stage.properties.resourcePath = this.additionals.ressInDesigner;","}"],"onInit":["if (this.stage.isInDesigner) {","  this.stage.properties.resourcePath = this.additionals.ressInDesigner;","}"]}}}
```
{% endraw %}
